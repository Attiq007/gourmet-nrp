{"version":3,"file":"nerp.gourmet.min.js","sources":["../../../apps/nerp/nerp/public/js/nerp.js"],"sourcesContent":["$(document).bind('toolbar_setup', function() {\n    $('.dropdown-help').hide();\n    // hiding erpnext footer link\n    $(\"div.footer-powered a.text-muted\").hide();\n\n    $('.navbar-home .erpnext-icon').hide();\n\n    // loading site configurations from cache\n    if(!('site_config' in frappe.utils)){\n        frappe.call({\n            method: \"nerp.utils.get_site_config\",\n            args: {},\n            callback : function(res){\n                if('message' in res){\n                    frappe.utils['site_config'] = res.message;\n                    var site_path = frappe.utils.site_config[\"site_module\"];\n                    $('.navbar-home .erpnext-icon').show().attr('src','assets/nerp/'+site_path+'/images/erp-icon.png');\n                }\n            }    \n        });\n    }\n\n    // redirect to designated desk in case of employee\n    // if hash == empty it means it is on desk\n    if(window.location.pathname==\"/desk\" && (window.location.hash==\"\" || window.location.hash.indexOf(\"modules/\") !== -1) ){\n        // check if logged in user is employee only\n        if(nerp.is_only_employee()){\n            window.location = frappe.utils.get_config_by_name(\"Desk_Page_Url_Employee\", \"/desk#gourmet-self-service\");\n        }\n    }\n});\n\n\n$(document).ready(function(){\n    $('.navbar-brand.ellipsis').attr('style','padding-top:0px !important');\n    $('.footer-powered, .footer-subscribe').remove();    \n    setTimeout(function(){\n        $(\".btn-primary.btn-login\").removeClass(\"btn-primary\").addClass(\"btn-default\");\n        $(\".btn-ldap-login\").removeClass(\"btn-default\").addClass(\"btn-primary\");\n    }, 100);\n\n    $(\".btn-default.btn-ldap-login\").after($(\".btn-primary.btn-login\"));\n    \n    $('.form-footer').hide();\n\n});\n\n\n frappe.utils.check_is_active = function(name){\n\n    if(!('site_config' in frappe.utils)){\n        console.log(\"Site config is not loaded yet\");\n        return false;\n    }\n    let obj = frappe.utils.site_config[name];\n\n    if(typeof obj == \"undefined\")\n        return false;\n    \n    return !!+obj;\n\n}\n   \nfrappe.utils.get_config_by_name = function(name,default_value = ''){\n\n    if(!('site_config' in frappe.utils)){\n        return default_value;\n    }\n    let obj = frappe.utils.site_config[name];\n\n    if(typeof obj == \"undefined\")\n        return default_value;\n    \n    return obj;\n\n}\n\nfrappe.utils.get_age = function(dobString, default_value = ''){\n\n    var today = new Date();\n    var birthDate = new Date(dobString);\n    var age = today.getFullYear() - birthDate.getFullYear();\n    var m = today.getMonth() - birthDate.getMonth();\n    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\n        age--;\n    }\n    return age;\n\n}\n\n// all our custom js functions and utilities will use this instance\nvar NERP = function(){\n    this.onlyAlphabets = function(e, t) {\n        try {\n            if (e) {\n                var charCode = e.keyCode;\n            }\n            else if (e) {\n                var charCode = e.which;\n            }\n            else { return true; }\n            if ((charCode > 64 && charCode < 91) || (charCode > 96 && charCode < 123) || charCode == 32)\n                return true;\n            else\n                return false;\n        }\n        catch (err) {\n            frappe.msgprint(err.Description);\n        }\n    },\n    this.get_login_emp_code = function(){\n        var code = \"\";\n        frappe.call({\n            method: \"nerp.utils.get_employee_code\",\n            args: {},\n            async:false,\n            callback : function(res){\n                if('message' in res){\n                    code = res.message;\n                }\n            }\n        });\n        return code;\n    },\n    this.is_only_employee = function(){\n        var is_employee = false;\n        frappe.call({\n            method: \"nerp.utils.is_only_employee\",\n            args: {},\n            async:false,\n            callback : function(res){\n                if('message' in res){\n                    is_employee = res.message;\n                }\n            }\n        });\n        return is_employee;\n    }\n}\n\nNERP.prototype.methods = function(){}\nNERP.prototype.utils = function(){}\n\nwindow.nerp = new NERP();\n\n$(document).on('page-change', function(e) {\n    if(window.location.pathname==\"/desk\" && (window.location.hash==\"\" || window.location.hash.indexOf(\"modules/\") !== -1) ){\n        // check if logged in user is employee only\n        if(nerp.is_only_employee()){\n            window.location = frappe.utils.get_config_by_name(\"DESK_PAGE_URL_EMPLOYEE\", \"/desk#gourmet-self-service\");\n        }\n    }\n});\n"],"names":["let"],"mappings":"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"}